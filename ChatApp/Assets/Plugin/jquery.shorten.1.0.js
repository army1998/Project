!function (s) { s.fn.shorten = function (e) { var t = { showChars: 100, ellipsesText: "...", moreText: "more", lessText: "less" }; return e && s.extend(t, e), s(document).off("click", ".morelink"), s(document).on({ click: function () { var e = s(this); return e.hasClass("less") ? (e.removeClass("less"), e.html(t.moreText)) : (e.addClass("less"), e.html(t.lessText)), e.parent().prev().toggle(), e.prev().slideToggle(), !1 } }, ".morelink"), this.each(function () { var e = s(this); if (!e.hasClass("shortened")) { e.addClass("shortened"); var n = e.html(); if (n.length > t.showChars) { var r = n.substr(0, t.showChars) + '<span class="moreellipses"> </span><span class="morecontent"><span>' + n.substr(t.showChars, n.length - t.showChars) + '</span> <a href="#" class="morelink">' + t.ellipsesText + t.moreText + "</a></span>"; e.html(r), s(".morecontent span").hide() } } }) } }(jQuery);